jQuery(document).ready(function(a){var b={init:function(){var b='<li><a href="" data-sort="gd-themes" class="js-gd-themes">'+gdThemesTab.tab+"</a></li>";a(".wp-filter > .filter-links").append(b),a(".page-title-action").attr("aria-expanded",!0)},shiftAddNewTheme:function(){var b=a(".add-new-theme");b.remove(),a(".theme-browser .themes").prepend(b)}},c=wp.themes.view.Installer.prototype,d=a("body");wp.themes.view.Installer=wp.themes.view.Installer.extend({events:function(){var a=_.extend({},c.events,{"click .filter-links li > a.js-gd-themes":"gdThemes"});return delete a["click .filter-links li > a"],a["click .filter-links li > a:not( .js-gd-themes )"]="onSort",a},browse:function(a){if("gd-themes"===a)return void this.loadThemes();this.collection.query({browse:a})},gdThemes:function(b){b.preventDefault(),this.clearSearch();var c=a(b.target),e=c.data("sort");c.hasClass(this.activeClass)||(d.removeClass("filters-applied show-filters"),a(".drawer-toggle").attr("aria-expanded","false"),d.removeClass("show-favorites-form"),a(".filter-links li > a, .theme-filter").removeClass(this.activeClass),a('[data-sort="'+e+'"]').addClass(this.activeClass),this.loadThemes(),wp.themes.router.navigate(wp.themes.router.baseUrl(wp.themes.router.browsePath+e)))},loadThemes:function(){d.addClass("loading-content").removeClass("no-results"),a.post(ajaxurl,{action:"gd_render_themes"},function(b){b.success&&(d.removeClass("loading-content"),a(".theme-browser .themes").empty().append(b.data),a(".theme-count").text(a(".theme-browser .themes > div.theme").length))}),a("#gd-theme-install").length||a(".theme-browser .themes").after('<div id="gd-theme-install" style="display:none;"></div>')},scroller:function(){a(".js-gd-themes").hasClass("current")||c.scroller.apply(this,arguments)}});var e={init:function(b){var c={action:"gd_install_theme",slug:b.data("slug"),gd_package:b.data("package"),_ajax_nonce:b.data("nonce")};a.post(ajaxurl,c,function(c){if(!c.success)return a('div[data-slug="'+b.data("slug")+'"]').append('<div class="notice notice-error notice-alt update-message"><p>'+gdThemesTab.error+"</p></div>"),void b.removeClass("updating-message");a('div[data-slug="'+b.data("slug")+'"]').append('<div class="notice notice-success notice-alt"><p>'+gdThemesTab.installed+"</p></div>").removeClass("focus").find(".theme-actions > .theme-install").removeClass("updating-message").text(gdThemesTab.installed).addClass("disabled").delay(1500).replaceWith('<a class="button button-primary activate-theme" href="'+c.data.activateUrl+'">'+gdThemesTab.activate+'</a><a class="button button-secondary live-preview-theme" href="'+c.data.customizeUrl+'">'+gdThemesTab.live_preview+"</a>")})}};b.init(),a(window).on("load",b.shiftAddNewTheme),a(document).on("click",".theme.godaddy .theme-screenshot, .theme.godaddy .more-details",function(){var b=a(this).closest(".theme.godaddy").attr("data-demo-url");window.open(b,"_blank")}),a(document).on("click",".theme.godaddy .button.theme-install",function(b){b.preventDefault(),b.stopPropagation(),a(this).addClass("updating-message").parents("div.theme").addClass("focus"),e.init(a(this))})});