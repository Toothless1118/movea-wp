window.WPEM=window.WPEM||{},jQuery(document).ready(function(a){var b=(new Date).getTime()/1e3;window.WPEM.Form={beforeSubmit:function(c){var d=(new Date).getTime()/1e3;a("#wpem_step_took").val(parseFloat(d-b).toFixed(3)),c.find("input, select").blur(),c.find('input[type="submit"]').prop("disabled",!0).addClass("disabled"),this.displaySpinner();var e=a(".wpem-steps-list-item a");e.css("cursor","default"),e.on("click",function(a){a.preventDefault()})},displaySpinner:function(){a("#wpbody-content").block({css:{position:"fixed",width:"100%"},message:wpem_vars.i18n.loading_message,overlayCSS:{backgroundColor:"#fff",opacity:"0.9"}})}},a(".wpem-screen form").on("click","#wpem_no_thanks",function(b){b.preventDefault(),window.confirm(wpem_vars.i18n.exit_confirm)&&(window.WPEM.Form.displaySpinner(),a("#wpem_continue").val("no"),a(".wpem-screen form").submit())});var c=!1;a(".wpem-screen").on("submit","form",function(b){if(c)return!0;var d=a(this);return!!d[0].checkValidity()&&(b.preventDefault(),window.WPEM.Form.beforeSubmit(d),c=!0,-1===navigator.userAgent.indexOf("Safari")?(d.submit(),!1):void setTimeout(function(){d.submit()},250))}),a('input[name="wpem_site_type"]').on("click",function(){var b=a('input[name="wpem_woocommerce[calc_shipping]"], input[name="wpem_woocommerce[calc_taxes]"], *[name^="wpem_woocommerce[payment_methods]"], input[name="wpem_woocommerce[prices_include_tax]"]');if("store"!==a(this).val())return a(".wpem-ecommerce-option-group").find('input[type="checkbox"], input[type="radio"], select').not(b).removeAttr("required"),void a(".wpem-ecommerce-option-group").slideUp();a(".wpem-ecommerce-option-group").find('input[type="checkbox"], input[type="radio"], select').not(b).attr("required","required"),a(".wpem-ecommerce-option-group").slideDown()}),a('input[name="wpem_woocommerce[calc_taxes]"]').on("click",function(){var b=".wpem-woocommerce-prices-include-tax";if(a(this).is(":checked"))return void a(b).slideDown();a(b).slideUp()}),a("#wpem_woocommerce\\[store_location\\]").on("change",function(b){a.post(wpem_vars.ajax_url,{action:"store_location_change",location_nonce:wpem_vars.ajax_nonce,location:a(b.currentTarget).val()},function(b){if(b.success)return a.isEmptyObject(b.data.tax_table)?void a(".wpem-woocommerce-tax-details").html(""):void a(".wpem-woocommerce-tax-details").html(b.data.tax_table)})})});